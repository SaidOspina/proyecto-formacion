<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrador - Ven a Formarte</title>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="icon" href="../img/logo.png" type="image/png">
</head>
<body class="pizarra-bg">
    <!-- Navegaci√≥n -->
    <nav class="navbar">
        <a href="#" class="navbar-brand">
            <img src="../img/logo.png" alt="Logo" style="height: 45px;">
            <span style="font-size: 1.3rem;">Admin Panel</span>
        </a>
        <div class="navbar-menu">
            <span class="user-info">üë§ <span id="userName">Administrador</span></span>
            <a href="#" id="logoutBtn" class="btn btn-outline" style="padding: 8px 16px;">Salir</a>
        </div>
    </nav>

    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <ul class="admin-menu">
                <li><a href="#" class="active" data-section="dashboard">üìä Dashboard</a></li>
                <li><a href="#" data-section="usuarios">üë• Usuarios</a></li>
                <li><a href="#" data-section="estadisticas">üìà Estad√≠sticas Demogr√°ficas</a></li>
                <li><a href="#" data-section="preguntas">‚ùì Preguntas</a></li>
                <li><a href="#" data-section="contenido">üìö Contenido</a></li>
            </ul>
        </aside>

        <!-- Contenido principal -->
        <main class="admin-content">
            <!-- Dashboard -->
            <section id="dashboardSection" class="admin-section">
                <div class="admin-header">
                    <h1>üìä Dashboard</h1>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-numero" id="totalUsuarios">0</div>
                        <div class="stat-label">Total Usuarios</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-numero" id="usuariosActivos">0</div>
                        <div class="stat-label">Usuarios Activos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-numero" id="certificadosEmitidos">0</div>
                        <div class="stat-label">Certificados</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-numero" id="tasaCompletitud">0%</div>
                        <div class="stat-label">Tasa Completitud</div>
                    </div>
                </div>

                <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div class="stat-card">
                        <div class="stat-numero" id="completaronT1">0</div>
                        <div class="stat-label">Completaron Tem√°tica 1</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-numero" id="completaronT2">0</div>
                        <div class="stat-label">Completaron Tem√°tica 2</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-numero" id="completaronT3">0</div>
                        <div class="stat-label">Completaron Tem√°tica 3</div>
                    </div>
                </div>
            </section>

            <!-- Usuarios -->
            <section id="usuariosSection" class="admin-section hidden">
                <div class="admin-header">
                    <h1>üë• Gesti√≥n de Usuarios</h1>
                    <button class="btn btn-primary" onclick="abrirModalUsuario()">+ Nuevo Usuario</button>
                </div>

                <div class="card" style="margin-bottom: 20px;">
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <input type="text" id="busquedaUsuario" class="form-control" placeholder="Buscar por nombre, correo o c√©dula..." style="flex: 1; min-width: 200px;">
                        <select id="filtroEstado" class="form-control" style="width: 150px;">
                            <option value="">Todos</option>
                            <option value="Activo">Activos</option>
                            <option value="Inactivo">Inactivos</option>
                        </select>
                        <select id="filtroTipo" class="form-control" style="width: 150px;">
                            <option value="">Todos</option>
                            <option value="Asesor">Asesores</option>
                            <option value="Administrador">Admins</option>
                        </select>
                        <button class="btn btn-secondary" onclick="buscarUsuarios()">üîç Buscar</button>
                    </div>
                </div>

                <div class="tabla-container">
                    <table class="tabla">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>C√©dula</th>
                                <th>Correo</th>
                                <th>G√©nero</th>
                                <th>Edad</th>
                                <th>Cargo</th>
                                <th>Tipo</th>
                                <th>Estado</th>
                                <th>Progreso</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaUsuarios">
                            <!-- Se llena din√°micamente -->
                        </tbody>
                    </table>
                </div>

                <div class="paginacion" id="paginacionUsuarios"></div>
            </section>

            <!-- Estad√≠sticas Demogr√°ficas -->
            <section id="estadisticasSection" class="admin-section hidden">
                <div class="admin-header">
                    <h1>üìà Estad√≠sticas Demogr√°ficas</h1>
                    <button class="btn btn-secondary" onclick="cargarEstadisticasDemograficas()">üîÑ Actualizar</button>
                </div>

                <!-- Por G√©nero -->
                <div class="card">
                    <h3 class="titulo-tiza" style="margin-bottom: 20px;">‚öß Distribuci√≥n por G√©nero</h3>
                    <div class="tabla-container">
                        <table class="tabla">
                            <thead>
                                <tr>
                                    <th>G√©nero</th>
                                    <th>Total</th>
                                    <th>Porcentaje</th>
                                </tr>
                            </thead>
                            <tbody id="tablaGenero">
                                <tr><td colspan="3" style="text-align: center;">Cargando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Por Edad -->
                <div class="card">
                    <h3 class="titulo-tiza" style="margin-bottom: 20px;">üéÇ Distribuci√≥n por Rango de Edad</h3>
                    <div class="tabla-container">
                        <table class="tabla">
                            <thead>
                                <tr>
                                    <th>Rango de Edad</th>
                                    <th>Total</th>
                                    <th>Porcentaje</th>
                                </tr>
                            </thead>
                            <tbody id="tablaEdad">
                                <tr><td colspan="3" style="text-align: center;">Cargando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Por Profesi√≥n -->
                <div class="card">
                    <h3 class="titulo-tiza" style="margin-bottom: 20px;">üéì Top 10 Profesiones</h3>
                    <div class="tabla-container">
                        <table class="tabla">
                            <thead>
                                <tr>
                                    <th>Profesi√≥n</th>
                                    <th>Total</th>
                                    <th>Porcentaje</th>
                                </tr>
                            </thead>
                            <tbody id="tablaProfesion">
                                <tr><td colspan="3" style="text-align: center;">Cargando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Por Cargo -->
                <div class="card">
                    <h3 class="titulo-tiza" style="margin-bottom: 20px;">üíº Top 10 Cargos</h3>
                    <div class="tabla-container">
                        <table class="tabla">
                            <thead>
                                <tr>
                                    <th>Cargo</th>
                                    <th>Total</th>
                                    <th>Porcentaje</th>
                                </tr>
                            </thead>
                            <tbody id="tablaCargo">
                                <tr><td colspan="3" style="text-align: center;">Cargando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Preguntas -->
            <section id="preguntasSection" class="admin-section hidden">
                <div class="admin-header">
                    <h1>‚ùì Gesti√≥n de Preguntas</h1>
                    <button class="btn btn-primary" onclick="abrirModalPregunta()">+ Nueva Pregunta</button>
                </div>

                <div class="card" style="margin-bottom: 20px;">
                    <div style="display: flex; gap: 15px;">
                        <select id="filtroTematica" class="form-control" style="width: 200px;">
                            <option value="">Todas las tem√°ticas</option>
                            <option value="1">Tem√°tica 1</option>
                            <option value="2">Tem√°tica 2</option>
                            <option value="3">Tem√°tica 3</option>
                        </select>
                        <button class="btn btn-secondary" onclick="cargarPreguntas()">üîç Filtrar</button>
                    </div>
                </div>

                <div id="listaPreguntas">
                    <!-- Se llena din√°micamente -->
                </div>
            </section>

            <!-- Contenido -->
            <section id="contenidoSection" class="admin-section hidden">
                <div class="admin-header">
                    <h1>üìö Vista Previa del Contenido</h1>
                </div>

                <div class="card">
                    <h3 class="titulo-tiza">Tem√°tica 1: Lineamientos T√©cnicos para la Atenci√≥n Psicosocial</h3>
                    <p class="texto-tiza">Fundamentos de la atenci√≥n psicosocial, pilares, componentes y estrategias de intervenci√≥n.</p>
                    <a href="tematica1.html" target="_blank" class="btn btn-secondary" style="margin-top: 15px;">Ver Tem√°tica 1</a>
                </div>

                <div class="card">
                    <h3 class="titulo-tiza">Tem√°tica 2: Rutas de Atenci√≥n Humanitaria</h3>
                    <p class="texto-tiza">Marco legal, etapas del proceso y ruta de respuesta institucional.</p>
                    <a href="tematica2.html" target="_blank" class="btn btn-secondary" style="margin-top: 15px;">Ver Tem√°tica 2</a>
                </div>

                <div class="card">
                    <h3 class="titulo-tiza">Tem√°tica 3: Principios Humanitarios Globales</h3>
                    <p class="texto-tiza">Los cuatro principios fundamentales y otros principios rectores.</p>
                    <a href="tematica3.html" target="_blank" class="btn btn-secondary" style="margin-top: 15px;">Ver Tem√°tica 3</a>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal Usuario -->
    <div class="modal" id="modalUsuario">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalUsuarioTitulo">Nuevo Usuario</h2>
                <button class="modal-close" onclick="cerrarModal('modalUsuario')">&times;</button>
            </div>
            <form id="formUsuario">
                <input type="hidden" id="usuarioId">
                <div class="form-group">
                    <label>C√©dula</label>
                    <input type="text" id="usuarioCedula" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Nombre completo</label>
                    <input type="text" id="usuarioNombre" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Correo</label>
                    <input type="email" id="usuarioCorreo" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Tel√©fono</label>
                    <input type="tel" id="usuarioTelefono" class="form-control" required>
                </div>
                
                <!-- Nuevos campos demogr√°ficos -->
                <div class="form-group">
                    <label>G√©nero</label>
                    <select id="usuarioGenero" class="form-control" required>
                        <option value="">Seleccionar</option>
                        <option value="Masculino">Masculino</option>
                        <option value="Femenino">Femenino</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                
                <div class="form-group hidden" id="campoOtroGenero">
                    <label>Especifica el g√©nero</label>
                    <input type="text" id="usuarioOtroGenero" class="form-control">
                </div>
                
                <div class="form-group">
                    <label>Edad</label>
                    <input type="number" id="usuarioEdad" class="form-control" required min="18" max="100">
                </div>
                
                <div class="form-group">
                    <label>Profesi√≥n</label>
                    <input type="text" id="usuarioProfesion" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label>Cargo</label>
                    <input type="text" id="usuarioCargo" class="form-control" required>
                </div>
                
                <div class="form-group" id="campoPassword">
                    <label>Contrase√±a</label>
                    <input type="password" id="usuarioPassword" class="form-control" minlength="6">
                </div>
                <div class="form-group">
                    <label>Tipo de Usuario</label>
                    <select id="usuarioTipo" class="form-control">
                        <option value="Asesor">Asesor</option>
                        <option value="Administrador">Administrador</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Estado</label>
                    <select id="usuarioEstado" class="form-control">
                        <option value="Activo">Activo</option>
                        <option value="Inactivo">Inactivo</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Guardar</button>
            </form>
        </div>
    </div>

    <!-- Modal Pregunta -->
    <div class="modal" id="modalPregunta">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalPreguntaTitulo">Nueva Pregunta</h2>
                <button class="modal-close" onclick="cerrarModal('modalPregunta')">&times;</button>
            </div>
            <form id="formPregunta">
                <input type="hidden" id="preguntaId">
                <div class="form-group">
                    <label>Tem√°tica</label>
                    <select id="preguntaTematica" class="form-control" required>
                        <option value="1">Tem√°tica 1</option>
                        <option value="2">Tem√°tica 2</option>
                        <option value="3">Tem√°tica 3</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Enunciado</label>
                    <textarea id="preguntaEnunciado" class="form-control" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>‚úÖ Respuesta Correcta</label>
                    <input type="text" id="preguntaCorrecta" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>‚ùå Respuesta Incorrecta 1</label>
                    <input type="text" id="preguntaR1" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>‚ùå Respuesta Incorrecta 2</label>
                    <input type="text" id="preguntaR2" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>‚ùå Respuesta Incorrecta 3</label>
                    <input type="text" id="preguntaR3" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Guardar</button>
            </form>
        </div>
    </div>

    <!-- Loading -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p class="loading-text">Cargando...</p>
    </div>

    <!-- Alert Container -->
    <div id="alertContainer" style="position: fixed; top: 100px; right: 20px; z-index: 5000; width: 300px;"></div>

    <script src="../js/common.js"></script>
    <script src="../js/admin.js"></script>
    <script src="../js/mobile-menu.js"></script>
</body>
</html>